<div class="xx-m-artDetail blog-post col-xs-12 col-sm-9 col-md-9">
	<div id="J_detail">
		<h2 class="blog-post-title">文章标题加载中</h2>
		<p class="blog-post-meta">发表时间：0000-00-00 by LinWenshu</p>
		<div class="xx-u-text">文章内容加载中</div>
	</div>
</div>
<script type="text/template" id="tpl_detail">
	<h2 class="blog-post-title"><#= data.title#></h2>
	<p class="blog-post-meta">发表时间：<#= Utils.timeFormat(data.time)#> by LinWenshu</p>
	<div class="xx-u-text"><#= data.text#></div>
</script>
<script>
	$(function(){
		var id = Utils.getUrlquery('id');
		getDetail(id);
	});
	function getDetail(id){
		$.ajax({
			url:"/ajax/getArticle",
			type:"GET",
			dataType:"JSON",
			data:{aid:id},
			success:function(rslt){
				if(rslt.res_code==2){
					alert(rslt.res_msg);
					window.location.href="/blog";
				}else{
					var html = $('#tpl_detail').html();//banner上的标展示
					_.templateSettings = {	//避免前端模板被ejs语法解析
						evaluate    : /<#([\s\S]+?)#>/g,
					    interpolate : /<#=([\s\S]+?)#>/g,
					    escape      : /<#-([\s\S]+?)#>/g
					};
					var template = _.template(html);
					var tpl = template({data:rslt.articleDetail});
					$('#J_detail').html(tpl);
					//面包屑增加文字
					$('.breadcrumb').append('<li class="active">'+rslt.articleDetail.title+'</li>')
				}
			},
			error:function(rslt){}
		})
	};
</script>